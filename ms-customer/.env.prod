# ==============================================================================
# CUSTOMER SERVICE ENVIRONMENT VARIABLES TEMPLATE
# ==============================================================================
# Copy this file to .env and customize for your environment
# DO NOT commit .env file to version control
# ==============================================================================

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================
SPRING_APPLICATION_NAME=ms-customer
SPRING_PROFILES_ACTIVE=dev
SERVER_PORT=8084
SERVER_CONTEXT_PATH=/

# ==============================================================================
# MONGODB CONFIGURATION
# ==============================================================================
MONGODB_URI=mongodb://localhost:27017/customerdb
MONGODB_DATABASE=customerdb
MONGODB_USERNAME=
MONGODB_PASSWORD=
MONGODB_CONNECTION_POOL_SIZE=10
MONGODB_MAX_WAIT_TIME=120000
MONGODB_MAX_CONNECTION_IDLE_TIME=30000

# ==============================================================================
# REDIS CONFIGURATION
# ==============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0
REDIS_TIMEOUT=2000
REDIS_POOL_MAX_ACTIVE=8
REDIS_POOL_MAX_IDLE=8
REDIS_POOL_MIN_IDLE=0
REDIS_POOL_MAX_WAIT=-1

# ==============================================================================
# KAFKA CONFIGURATION
# ==============================================================================
KAFKA_BOOTSTRAP_SERVERS=localhost:9092
KAFKA_CONSUMER_GROUP_ID=customer-service
KAFKA_AUTO_OFFSET_RESET=earliest

# Customer Events Topics
CUSTOMER_EVENTS_TOPIC=customer.events
CUSTOMER_CREATED_TOPIC=customer.events
CUSTOMER_UPDATED_TOPIC=customer.events
CUSTOMER_STATUS_CHANGED_TOPIC=customer.events

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=DEBUG
LOG_LEVEL_CUSTOMER=INFO
LOG_LEVEL_SPRING=INFO
LOG_LEVEL_SPRING_DATA_MONGODB=DEBUG
LOG_LEVEL_SPRING_WEB_REACTIVE=DEBUG
LOG_LEVEL_REACTOR_NETTY=INFO
LOG_FILE=logs/ms-customer.log
LOG_FILE_MAX_SIZE=10MB
LOG_FILE_MAX_HISTORY=30

# ==============================================================================
# ACTUATOR CONFIGURATION
# ==============================================================================
ACTUATOR_BASE_PATH=/actuator
ACTUATOR_ENDPOINTS=health,info,metrics,prometheus
ACTUATOR_HEALTH_SHOW_DETAILS=when-authorized
ACTUATOR_HEALTH_ENABLED=true
ACTUATOR_INFO_ENABLED=true
ACTUATOR_METRICS_ENABLED=true
PROMETHEUS_ENABLED=true

# ==============================================================================
# OPENAPI/SWAGGER CONFIGURATION
# ==============================================================================
API_TITLE=Customer Service API
API_DESCRIPTION=Customer Management REST API
API_VERSION=1.0.0
API_LICENSE_NAME=Apache 2.0
API_LICENSE_URL=https://www.apache.org/licenses/LICENSE-2.0
API_SERVER_URL=http://localhost:8084

SPRINGDOC_API_DOCS_PATH=/v3/api-docs
SPRINGDOC_API_DOCS_ENABLED=true
SPRINGDOC_SWAGGER_UI_PATH=/swagger-ui.html
SPRINGDOC_SWAGGER_UI_ENABLED=true
SPRINGDOC_OPERATIONS_SORTER=method
SPRINGDOC_TAGS_SORTER=alpha

# ==============================================================================
# SECURITY CONFIGURATION
# ==============================================================================
SECURITY_ENABLED=true
SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI=http://localhost:8082
SECURITY_ENCRYPTION_ENABLED=true
SECURITY_ENCRYPTION_ALGORITHM=AES
SECURITY_ENCRYPTION_KEY_SIZE=256

# ==============================================================================
# CACHE CONFIGURATION
# ==============================================================================
CACHE_ENABLED=true
CACHE_TYPE=redis
CACHE_TTL=3600
CACHE_SIZE=10000
CACHE_CAFFEINE_SPEC=maximumSize=10000,expireAfterWrite=1h

# ==============================================================================
# WEBSOCKET CONFIGURATION
# ==============================================================================
WEBSOCKET_ENABLED=true
WEBSOCKET_MAX_CONNECTIONS=1000
WEBSOCKET_HEARTBEAT_INTERVAL=30s
WEBSOCKET_MAX_MESSAGE_SIZE=64KB

# ==============================================================================
# API CONFIGURATION
# ==============================================================================
API_MAX_PAGE_SIZE=100
API_DEFAULT_PAGE_SIZE=20

# ==============================================================================
# MONITORING CONFIGURATION
# ==============================================================================
MONITORING_ENABLED=true
MONITORING_HEALTH_CHECKS_ENABLED=true
MONITORING_METRICS_ENABLED=true
MONITORING_LOGGING_ENABLED=true
MONITORING_LOG_LEVEL=INFO

# JVM Metrics
METRICS_JVM_GC_ENABLED=true
METRICS_JVM_MEMORY_ENABLED=true
METRICS_JVM_THREAD_ENABLED=true
METRICS_JVM_CLASSLOADER_ENABLED=true

# HTTP Metrics
METRICS_WEB_SERVER_REQUEST_AUTOTIME_ENABLED=true
METRICS_WEB_SERVER_REQUEST_AUTOTIME_PERCENTILES=0.5,0.9,0.95,0.99
METRICS_WEB_SERVER_REQUEST_AUTOTIME_PERCENTILES_HISTOGRAM=true

# MongoDB Metrics
METRICS_MONGODB_DRIVER_POOL_ENABLED=true
METRICS_MONGODB_CONNECTIONPOOL_ENABLED=true
METRICS_MONGODB_COMMANDS_ENABLED=true

# ==============================================================================
# DOCKER-SPECIFIC OVERRIDES
# ==============================================================================
# Uncomment and use these when running in Docker containers

# MONGODB_URI=mongodb://mongodb:27017/customerdb
# REDIS_HOST=redis
# KAFKA_BOOTSTRAP_SERVERS=kafka:9092
# SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI=http://auth-service:8082

# ==============================================================================
# PRODUCTION-SPECIFIC SETTINGS
# ==============================================================================
# These should be set in production environment

# MONGODB_USERNAME=<mongodb-username>
# MONGODB_PASSWORD=<mongodb-password>
# REDIS_PASSWORD=<strong-redis-password>
# WEBSOCKET_MAX_CONNECTIONS=5000
# CACHE_SIZE=50000

# ==============================================================================
# NOTES
# ==============================================================================
# - Replace all placeholder values with actual values
# - Never commit sensitive data to version control
# - Use different .env files for different environments
# - For production, use a secrets management system (Vault, AWS Secrets Manager, etc.)
# - Validate all URLs and connection strings before deployment
# - Monitor MongoDB connection pool usage and adjust pool size based on load
# - Configure proper authentication for MongoDB in production
