# ==============================================================================
# API GATEWAY ENVIRONMENT VARIABLES TEMPLATE
# ==============================================================================
# Copy this file to .env and customize for your environment
# DO NOT commit .env file to version control
# ==============================================================================

# ==============================================================================
# APPLICATION CONFIGURATION
# ==============================================================================
SPRING_APPLICATION_NAME=api-gateway
SPRING_PROFILES_ACTIVE=dev
SERVER_PORT=8080
SERVER_CONTEXT_PATH=/

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================
LOG_LEVEL_ROOT=INFO
LOG_LEVEL_APP=DEBUG
LOG_LEVEL_GATEWAY=DEBUG
LOG_LEVEL_SPRING=INFO
LOG_LEVEL_SPRING_CLOUD=DEBUG
LOG_FILE=logs/api-gateway.log
LOG_FILE_MAX_SIZE=10MB
LOG_FILE_MAX_HISTORY=30

# ==============================================================================
# ACTUATOR CONFIGURATION
# ==============================================================================
ACTUATOR_BASE_PATH=/actuator
ACTUATOR_ENDPOINTS=health,info,metrics,prometheus
ACTUATOR_HEALTH_SHOW_DETAILS=when-authorized
ACTUATOR_HEALTH_ENABLED=true
ACTUATOR_INFO_ENABLED=true
ACTUATOR_METRICS_ENABLED=true
PROMETHEUS_ENABLED=true

# ==============================================================================
# OPENAPI/SWAGGER CONFIGURATION
# ==============================================================================
API_TITLE=API Gateway
API_DESCRIPTION=Central entry point for all microservices
API_VERSION=1.0.0
API_LICENSE_NAME=Apache 2.0
API_LICENSE_URL=https://www.apache.org/licenses/LICENSE-2.0
API_SERVER_URL=http://localhost:8080

SPRINGDOC_API_DOCS_PATH=/v3/api-docs
SPRINGDOC_API_DOCS_ENABLED=true
SPRINGDOC_SWAGGER_UI_PATH=/swagger-ui.html
SPRINGDOC_SWAGGER_UI_ENABLED=true
SPRINGDOC_OPERATIONS_SORTER=method
SPRINGDOC_TAGS_SORTER=alpha

# ==============================================================================
# GATEWAY ROUTING CONFIGURATION
# ==============================================================================
# Service URLs for routing
AUTH_SERVICE_URL=http://localhost:8082
CUSTOMER_SERVICE_URL=http://localhost:8084
ORDER_SERVICE_URL=http://localhost:8081
PAYMENT_SERVICE_URL=http://localhost:8083

# Gateway Routes Configuration
GATEWAY_ROUTES_AUTH_ID=auth-service
GATEWAY_ROUTES_AUTH_URI=${AUTH_SERVICE_URL}
GATEWAY_ROUTES_AUTH_PREDICATES=Path=/api/auth/**
GATEWAY_ROUTES_AUTH_FILTERS=StripPrefix=1

GATEWAY_ROUTES_CUSTOMER_ID=customer-service
GATEWAY_ROUTES_CUSTOMER_URI=${CUSTOMER_SERVICE_URL}
GATEWAY_ROUTES_CUSTOMER_PREDICATES=Path=/api/customers/**
GATEWAY_ROUTES_CUSTOMER_FILTERS=StripPrefix=1

GATEWAY_ROUTES_ORDER_ID=order-service
GATEWAY_ROUTES_ORDER_URI=${ORDER_SERVICE_URL}
GATEWAY_ROUTES_ORDER_PREDICATES=Path=/api/orders/**
GATEWAY_ROUTES_ORDER_FILTERS=StripPrefix=1

GATEWAY_ROUTES_PAYMENT_ID=payment-service
GATEWAY_ROUTES_PAYMENT_URI=${PAYMENT_SERVICE_URL}
GATEWAY_ROUTES_PAYMENT_PREDICATES=Path=/api/payments/**
GATEWAY_ROUTES_PAYMENT_FILTERS=StripPrefix=1

# ==============================================================================
# SECURITY CONFIGURATION
# ==============================================================================
SECURITY_ENABLED=true
SECURITY_CORS_ENABLED=true
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:4200
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=*
CORS_EXPOSED_HEADERS=Authorization,Content-Type
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ==============================================================================
# MONITORING CONFIGURATION
# ==============================================================================
MONITORING_ENABLED=true
MONITORING_HEALTH_CHECKS_ENABLED=true
MONITORING_METRICS_ENABLED=true
MONITORING_LOGGING_ENABLED=true
MONITORING_LOG_LEVEL=INFO

# ==============================================================================
# EUREKA CONFIGURATION (Optional - for service discovery)
# ==============================================================================
EUREKA_ENABLED=false
EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE=http://localhost:8761/eureka/
EUREKA_INSTANCE_PREFER_IP_ADDRESS=true

# ==============================================================================
# CIRCUIT BREAKER CONFIGURATION
# ==============================================================================
CIRCUIT_BREAKER_ENABLED=true
RESILIENCE4J_CIRCUIT_BREAKER_ENABLED=true
RESILIENCE4J_CIRCUIT_BREAKER_FAILURE_RATE_THRESHOLD=50
RESILIENCE4J_CIRCUIT_BREAKER_SLOW_CALL_RATE_THRESHOLD=50
RESILIENCE4J_CIRCUIT_BREAKER_WAIT_DURATION_IN_OPEN_STATE=60000
RESILIENCE4J_CIRCUIT_BREAKER_SLOW_CALL_DURATION_THRESHOLD=3000
RESILIENCE4J_CIRCUIT_BREAKER_PERMITTED_NUMBER_OF_CALLS_IN_HALF_OPEN_STATE=3
RESILIENCE4J_CIRCUIT_BREAKER_SLIDING_WINDOW_SIZE=10

# ==============================================================================
# RATE LIMITING CONFIGURATION
# ==============================================================================
GATEWAY_RATE_LIMITING_ENABLED=true
GATEWAY_RATE_LIMIT_GLOBAL_REQUESTS_PER_MINUTE=1000
GATEWAY_RATE_LIMIT_PER_ROUTE_REQUESTS_PER_MINUTE=100

# ==============================================================================
# DOCKER-SPECIFIC OVERRIDES
# ==============================================================================
# Uncomment and use these when running in Docker containers

# AUTH_SERVICE_URL=http://auth-service:8082
# CUSTOMER_SERVICE_URL=http://ms-customer:8084
# ORDER_SERVICE_URL=http://ms-order-service:8081
# PAYMENT_SERVICE_URL=http://ms-payment-service:8083
# EUREKA_CLIENT_SERVICE_URL_DEFAULT_ZONE=http://eureka:8761/eureka/

# ==============================================================================
# PRODUCTION-SPECIFIC SETTINGS
# ==============================================================================
# These should be set in production environment

# CORS_ALLOWED_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
# GATEWAY_RATE_LIMIT_GLOBAL_REQUESTS_PER_MINUTE=10000
# GATEWAY_RATE_LIMIT_PER_ROUTE_REQUESTS_PER_MINUTE=500

# ==============================================================================
# NOTES
# ==============================================================================
# - Replace all placeholder values with actual values
# - Never commit sensitive data to version control
# - Use different .env files for different environments
# - For production, use a secrets management system (Vault, AWS Secrets Manager, etc.)
# - Validate all URLs and connection strings before deployment
# - Monitor and adjust rate limiting based on load testing results
